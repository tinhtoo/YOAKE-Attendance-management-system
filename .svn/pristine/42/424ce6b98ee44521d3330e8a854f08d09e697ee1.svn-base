<?php

use App\Http\Controllers\Master\MT10EmpCnvertController;
use App\Http\Controllers\UserAuthController;
use Illuminate\Support\Facades\Auth;
use Illuminate\Support\Facades\Route;

use App\Http\Controllers\Search\MT10EmpSearchController;
use App\Http\Controllers\Search\MT12DeptSearchController;

use App\Http\Controllers\Work_Time\WorkTimeEditorController;
use App\Http\Controllers\Work_Time\WorkTimeReferenceController;
use App\Http\Controllers\Work_Time\EmpWorkTimeReferenceController;
use App\Http\Controllers\Work_Time\EmpWorkStatusReferenceController;
use App\Http\Controllers\Work_Time\WorkTimeDeptEditorController;

use App\Http\Controllers\MT01ControlEditorController;
use App\Http\Controllers\MT06OverTmLmtEditorController;

// use App\Http\Controllers\MT11PasswordEditorController;
// use App\Http\Controllers\MT23CompanyReferenceController;
// use App\Http\Controllers\MT23CompanyEditorController;

// use App\Http\Controllers\MT23CompanyReferenceController;
// use App\Http\Controllers\MT23CompanyEditorController;

use App\Http\Controllers\MT11PasswordEditorController;
use App\Http\Controllers\Master\MT23CompanyController;
use App\Http\Controllers\Master\MT11LoginRefController;
use App\Http\Controllers\Master\MT10EmpReferenceController;
use App\Http\Controllers\Master\MT10EmpEditorController;
use App\Http\Controllers\Master\MT02CalendarPtnController;
use PhpParser\Node\Expr\PostDec;

/*
|--------------------------------------------------------------------------
| Web Routes
|--------------------------------------------------------------------------
|
| Here is where you can register web routes for your application. These
| routes are loaded by the RouteServiceProvider within a group which
| contains the "web" middleware group. Now create something great!
|
*/


/**Routeの設定をしました。 */
Auth::routes();

Route::group(['middleware' => 'AlreadyLoggedIn'], function () {
    //ログイン画面表示
    Route::get('/', [UserAuthController::class, 'login']);
    Route::post('check', [UserAuthController::class, 'loginCheck'])->name('auth.check');
});

//メインメニュー画面の表示
Route::group(['middleware' => 'islogged'], function () {
    Auth::routes();
    Route::get('main', [UserAuthController::class, 'main'])->name('main');
    Route::post('/logout', [UserAuthController::class, 'logout'])->name('logout.form');

    //***** 勤怠管理 *****//

    //出退勤入力画面表示
    Route::get('/work_time/WorkTimeEditor', [WorkTimeEditorController::class, 'worktimeeditor'])->name('worktimeeditor');
    Route::post('/work_time/WorkTimeEditor', [WorkTimeEditorController::class, 'search'])->name('wte.search');
    Route::post('/work_time/WorkTimeEditorEdit', [WorkTimeEditorController::class, 'edit'])->name('wte.edit');
    Route::post('/work_time/WorkTimeEditorUpdate', [WorkTimeEditorController::class, 'update'])->name('wte.update');
    Route::post('/work_time/WorkTimeEditorCancel', [WorkTimeEditorController::class, 'cancel'])->name('wte.cancel');

    //出退勤入力（部門別）画面表示
    Route::get('/work_time/WorkTimeDeptEditor', [WorkTimeDeptEditorController::class, 'WorkTimeDeptEditor'])->name('wtdepteditor');
    Route::post('/work_time/WorkTimeDeptEditor', [WorkTimeDeptEditorController::class, 'search'])->name('wtde.search');
    Route::post('/work_time/WorkTimeDeptEditorEdit', [WorkTimeDeptEditorController::class, 'edit'])->name('wtde.edit');
    Route::post('/work_time/WorkTimeDeptEditorUpdate', [WorkTimeDeptEditorController::class, 'update'])->name('wtde.update');
    Route::post('/work_time/WorkTimeDeptEditorCancel', [WorkTimeDeptEditorController::class, 'cancel'])->name('wtde.cancel');

    //出退勤照会　画面表示
    Route::get('work_time/EmpWorkStatusReference', [EmpWorkStatusReferenceController::class, 'EmpWorkStatusReference'])->name('empworkstatusRef');
    Route::post('work_time/EmpWorkStatusReference', [EmpWorkStatusReferenceController::class, 'searchBtn'])->name('empworkstatusRef.search');
    Route::post('work_time/EmpWorkStatusReferenceCancel', [EmpWorkStatusReferenceController::class, 'cancelBtn'])->name('empworkstatusRef.cancel');

    //勤務状況照会(個人用) 画面表示
    Route::get('work_time/WorkTimeReference', [WorkTimeReferenceController::class, 'WorkTimeReference'])->name('worktimeRef');
    Route::post('/work_time/WorkTimeReference', [WorkTimeReferenceController::class, 'searchBtn'])->name('worktimeRef.search');
    Route::post('/work_time/WorkTimeReferenceCancel', [WorkTimeReferenceController::class, 'cancelBtn'])->name('worktimeRef.cancel');

    //勤務状況照会(管理者用) 画面表示
    Route::get('/work_time/EmpWorkTimeReference', [EmpWorkTimeReferenceController::class, 'empworktime_ref'])->name('empworktime_ref');
    Route::post('/work_time/EmpWorkTimeReference', [EmpWorkTimeReferenceController::class, 'search'])->name('ewtr.search');
    Route::post('/work_time/EmpWorkTimeReferenceCancel', [EmpWorkTimeReferenceController::class, 'cancel'])->name('ewtr.cancel');

    //***** 帳票 *****//

    //勤務予定表(週・月別) 画面表示
    Route::get('form_print/WorkPlanPrint', 'App\Http\Controllers\HomeController@WorkPlanPrint');

    //勤務実績表(日・週・月別) 画面表示
    Route::get('form_print/WorkTimePrint', 'App\Http\Controllers\HomeController@WorkTimePrint');

    //未打刻／二重打刻一覧表  画面表示
    Route::get('form_print/TimeStampPrint', 'App\Http\Controllers\HomeController@TimeStampPrint');

    //事由／勤怠一覧表 画面表示
    Route::get('form_print/ReasonWorkPtnPrint', 'App\Http\Controllers\HomeController@ReasonWorkPtnPrint');

    //残業申請書 画面表示
    Route::get('form_print/OvertimeAplPrint', 'App\Http\Controllers\HomeController@OvertimeAplPrint');


    //***** シフト管理 *****//

    //シフトパターン情報入力 画面表示
    Route::get('shift/MT04ShiftPtnReference', 'App\Http\Controllers\HomeController@MT04ShiftPtnReference');

    //シフトパターン情報入力(新規シフトパタン登録) 画面表示
    Route::get('shift/MT04ShiftPtnEditor', 'App\Http\Controllers\HomeController@MT04ShiftPtnEditor');

    //月別シフト入力  画面表示
    Route::get('shift/MonthShiftEditor', 'App\Http\Controllers\HomeController@MonthShiftEditor');

    //社員別月別シフト入力 画面表示
    Route::get('shift/MonthShiftEmpEditor', 'App\Http\Controllers\HomeController@MonthShiftEmpEditor');



    //***** 管理業務 *****//

    //カレンダー情報入力画面表示
    Route::get('mng_oprt/MT03CalendarEditor', 'App\Http\Controllers\HomeController@MT03CalendarEditor');

    //シフト月次更新処理画面表示
    Route::get('mng_oprt/ShiftCalendarCarryOver', 'App\Http\Controllers\HomeController@ShiftCalendarCarryOver');

    //月次確定処理画面表示
    Route::get('mng_oprt/WorkTimeFix', 'App\Http\Controllers\HomeController@ShiftCalendarCarryOver');

    //月次確定状況照会画面
    Route::get('mng_oprt/WorkTimeFixReference', 'App\Http\Controllers\HomeController@WorkTimeFixReference');

    //最新打刻情報取得処理画面
    Route::get('mng_oprt/WorkTimeConvert', 'App\Http\Controllers\HomeController@WorkTimeConvert');

    //出退勤情報クリア処理画面表示
    Route::get('mng_oprt/WorkTimeClear', 'App\Http\Controllers\HomeController@WorkTimeClear');

    //カレンダー情報クリア処理画面表示
    Route::get('mng_oprt/CalendarClear', 'App\Http\Controllers\HomeController@CalendarClear');

    //勤務実績情報出力画面
    Route::get('mng_oprt/WorkTimeExport', 'App\Http\Controllers\HomeController@WorkTimeExport');


    //***** マスタ *****//

    //社員情報照会入力
    Route::get('master/MT10EmpReference', [MT10EmpReferenceController::class, 'search'])->name('search'); // 照会画面表示、検索
    Route::get('master/MT10EmpEditor', [MT10EmpEditorController::class, 'edit'])->name('edit'); // 登録画面表示
    Route::get('master/MT10EmpEditor/{id}', [MT10EmpEditorController::class, 'edit'])->name('edit'); // 編集画面表示
    Route::post('master/MT10EmpUpdate',[MT10EmpEditorController::class, 'update'])->name('update'); // 更新
    Route::post('master/MT10EmpDelete',[MT10EmpEditorController::class, 'delete'])->name('delete'); // 削除

    //ログイン情報入力
    Route::get('master/MT11LoginReference', [MT11LoginRefController::class, 'search'])->name('MT11LoginRef.search');
    Route::get('master/MT11LoginEditor/{id}', [MT11LoginRefController::class, 'edit'])->name('MT11LoginEdit.edit');
    Route::post('master/MT11LoginEditor/{id}', [MT11LoginRefController::class, 'update'])->name('MT11LoginEdit.update');


    //ログイン情報照会
    Route::get('master/MT11LoginEditor', 'App\Http\Controllers\HomeController@MT11LoginEditor');

    //パスワード変更入力
    Route::get('master/MT11PasswordEditor', [MT11PasswordEditorController::class, 'index']);
    Route::post('master/MT11PasswordEditor', [MT11PasswordEditorController::class, 'update'])->name('MT11Pass.update');

    //機能権限情報照会
    Route::get('master/MT14PGAuthReference', 'App\Http\Controllers\Master\MT14PGAuthReferenceController@index');

    //機能権限情報入力
    Route::get('master/MT14PGAuthEditor', 'App\Http\Controllers\HomeController@MT14PGAuthEditor');

    //部門情報照会
    Route::get('master/MT12DeptReference', 'App\Http\Controllers\HomeController@MT12DeptReference');

    //部門情報入力
    Route::get('master/MT12DeptEditor', 'App\Http\Controllers\HomeController@MT12DeptEditor');

    //組織変更照会
    Route::get('master/MT12OrgReference', 'App\Http\Controllers\HomeController@MT12OrgReference');

    //組織変更入力
    Route::get('master/MT12OrgEditor', 'App\Http\Controllers\HomeController@MT12OrgEditor');

    //部門情報検索（UpDeptSearch）
    Route::get('master/UpDeptSearch', 'App\Http\Controllers\HomeController@UpDeptSearch');

    //部門権限情報照会
    Route::get('master/MT13DeptAuthReference', 'App\Http\Controllers\HomeController@MT13DeptAuthReference');

    //部門権限情報入力
    Route::get('master/MT13DeptAuthEditor', 'App\Http\Controllers\HomeController@MT13DeptAuthEditor');

    //祝祭日・会社休日情報入力
    Route::get('master/MT08HolidayEditor', 'App\Http\Controllers\HomeController@MT08HolidayEditor');

    //勤務体系情報照会
    Route::get('master/MT05WorkPtnReference', 'App\Http\Controllers\HomeController@MT05WorkPtnReference');

    //勤務体系情報入力
    Route::get('master/MT05WorkPtnEditor', 'App\Http\Controllers\HomeController@MT05WorkPtnEditor');

    //端数処理情報入力
    Route::get('master/MT07FractionEditor', 'App\Http\Controllers\HomeController@MT07FractionEditor');

    //カレンダーパターン情報照会
    Route::get('master/MT02CalendarPtnReference', [MT02CalendarPtnController::class, 'search'])->name('MT02.search');

    //カレンダーパターン情報入力(更新・修正・削除)
    Route::get('master/MT02CalendarPtnEditor/{id}', [MT02CalendarPtnController::class, 'edit'])->name('MT02.edit');
    Route::post('master/MT02CalendarPtnEditor/{id}', [MT02CalendarPtnController::class, 'update'])->name('MT02.update');
    Route::post('master/MT02CalendarPtnEditor/{id}', [MT02CalendarPtnController::class, 'delete'])->name('MT02.delete');

    //新規カレンダーパターン情報登録
    Route::get('master/MT02CalendarPtnEditor', [MT02CalendarPtnController::class, 'storeIndex'])->name('MT02.storeIndex');
    Route::post('master/MT02CalendarPtnEditor', [MT02CalendarPtnController::class, 'store'])->name('MT02.store');

    //未実施*******未実装

    //残業上限情報入力
    Route::get('master/MT06OverTmLmtEditor', [MT06OverTmLmtEditorController::class, 'index'])->name('MT06.index');
    Route::post('master/MT06OverTmLmtEditor', [MT06OverTmLmtEditorController::class,  'update'])->name('MT06.update');

    //基本情報入力
    Route::get('master/MT01ControlEditor', [MT01ControlEditorController::class, 'index'])->name('MT01.index');
    Route::post('master/MT01ControlEditor', [MT01ControlEditorController::class, 'update'])->name('MT01.update');

    //社員番号一括変換
    Route::get('master/MT10EmpCnvert', [MT10EmpCnvertController::class, 'index'])->name('MT10EmpCnvert.index');
    Route::post('master/MT10EmpCnvert/', [MT10EmpCnvertController::class, 'update'])->name('MT10EmpCnvert.update');

    //社員情報書出処理
    Route::get('master/EmpExport', 'App\Http\Controllers\HomeController@EmpExport');

    //社員情報取込処理
    Route::get('master/EmpImport', 'App\Http\Controllers\HomeController@EmpImport');

    //所属情報入力
    Route::prefix('master')->group(function () {
        // 所属情報ルート //
        Route::get('MT23CompanyReference', [MT23CompanyController::class, 'MT23CompanyReferenceIndex'])->name('MT23.index');
        // 更新ルート //
        Route::get('MT23CompanyEditor/{id}', [MT23CompanyController::class, 'edit'])->name('MT23.edit');
        Route::post('MT23CompanyUpdate/{id}', [MT23CompanyController::class, 'update'])->name('MT23.update');
        // 登録ルート //
        Route::get('MT23CompanyRegisterIndex', [MT23CompanyController::class, 'registerIndex'])->name('MT23.registerIndex');
        Route::post('MT23CompanyRegister', [MT23CompanyController::class, 'companyRegister'])->name('MT23.companyRegister');
        // キャセンルルート //
        Route::post('MT23CompanyEditor/{id}', [MT23CompanyController::class, 'cancelBtn'])->name('MT23.cancel');
        // 削除ルート //
        Route::post('MT23CompanyDelete/{id}', [MT23CompanyController::class, 'delete'])->name('MT23.delete');
    });
});

//***** sub-画面処理*****//

//部門情報検索（MT12DeptSearch）
Route::get('search/MT12DeptSearch', [MT12DeptSearchController::class, 'search'])->name('dep.search');
Route::get('search/MT12DeptSearch/{cd}', [MT12DeptSearchController::class, 'getName'])->name('dep.getName');


//社員情報検索（MT10EmpSearch）
Route::get('/search/MT10EmpSearch', [MT10EmpSearchController::class, 'search'])->name('emp.search');
