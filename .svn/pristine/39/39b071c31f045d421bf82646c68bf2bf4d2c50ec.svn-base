<!-- 出退勤入力画面 -->
@extends('menu.main')

@section('title','出退勤入力')
@section('content')
<div id="contents-stage">
    <table>
        <tbody>
            <tr>
                <td>
                    <div id="UpdatePanel1">
                        <!-- header -->
                        <form action="" method="post" id="form">
                            {{ csrf_field() }}
                            <table class="InputFieldStyle1">
                                <tbody>
                                    <tr>
                                        <th>対象月度</th>
                                        <td>
                                            <input name="ddlDate"
                                            id="ddlDate"
                                            type="text"
                                            autocomplete="off"
                                            value="{{ old('ddlDate', !empty(Session::get('date')) ? Session::get('date') : date('Y年m月') ) }}"
                                            @if(!empty($results))
                                            disabled="disabled"
                                            @endif
                                            />
                                        </td>
                                    </tr>
                                    <tr>
                                        <th>社員番号</th>
                                        <td>
                                            <input name="txtEmpCd"
                                                id="txtEmpCd"
                                                style="width: 80px;"
                                                type="text"
                                                maxlength="10"
                                                value="{{ old('txtEmpCd', !empty($search_data['txtEmpCd'])?$search_data['txtEmpCd']:'') }}"
                                                oninput="value = onlyHalfNumWord(value)"
                                                @if(!empty($results))
                                                disabled="disabled"
                                                @else
                                                autofocus
                                                @endif
                                                >
                                            <input name="btnSearchEmpCd"
                                                class="SearchButton"
                                                id="btnSearchEmpCd"
                                                type="button"
                                                value="?"
                                                onclick="SearchEmp();return false"
                                                @if(!empty($results))
                                                disabled="disabled"
                                                @endif
                                            >
                                            <input name="empName"
                                                class="OutlineLabel"
                                                type="text"
                                                style="width: 200px; display: inline-block;"
                                                id="empName"
                                                value="{{ old('empName') }}"
                                                readonly="readonly"
                                                @if(!empty($results))
                                                disabled="disabled"
                                                @endif
                                            >
                                            @if ($errors->has('txtEmpCd'))
                                            <span class="text-danger" id="EmpCdValidError">
                                                {{ $errors->first('txtEmpCd') }}
                                            </span>
                                            @endif
                                            <span class="text-danger" id="EmpCdError">
                                            </span>
                                        </td>
                                        <td>

                                        </td>
                                    </tr>
                                    <tr>
                                        <th>部門</th>
                                        <td>
                                        <input name ="deptName"
                                            class="OutlineLabel"
                                            type="text"
                                            style="width: 200px; display: inline-block;"
                                            id="deptName"
                                            value="{{ old('deptName') }}"
                                            readonly="readonly"
                                            @if(!empty($results))
                                            disabled="disabled"
                                            @endif
                                        >
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                            <div class="line">
                                <hr>
                            </div>
                            <table>
                                <tbody>
                                    <tr>
                                        <td style="width: auto;">
                                            <input
                                                name="btnDisp"
                                                id="btnShow"
                                                class="ButtonStyle1 submit-form"
                                                type="button"
                                                value="表示"
                                                data-url = "{{ route('wte.search')}}"
                                                onclick="return (!$('#empCdError').text())"
                                                @if(!empty($results))
                                                disabled="disabled"
                                                @endif
                                            >
                                            @if(!empty($results))
                                                <input
                                                name="btnEdit"
                                                id="btnUpdate"
                                                type="button"
                                                value="更新"
                                                class="ButtonStyle1 submit-form"
                                                data-url = "{{ route('wte.update')}}"
                                            >
                                            @endif
                                            <input
                                                name="btnCancel2"
                                                class="ButtonStyle1 submit-form"
                                                id="btnCancel2"
                                                type="button"
                                                value="キャンセル"
                                                data-url = "{{ route('wte.cancel')}}"
                                            >
                                            &nbsp;
                                            <span id="lblNoStampColor" style="background-color: tomato;">　　　</span>
                                            <span id="lblNoStamp">未打刻</span>
                                            &nbsp;
                                            <span id="lblDbStampColor" style="background-color: lightskyblue;">　　　</span>
                                            <span id="lblDbStamp">二重打刻</span>
                                            &nbsp;
                                            @isset($results)
                                            @if(count($results) > 1)
                                            @if(isset($confirmCheck))
                                            <span class="font-style2" id="lblFixMsg">{{ config('consts.fix_msg')}}</span>
                                            @endif
                                            @endif
                                            @endisset
                                        </td>
                                        <td class="right">
                                            <span class="font-style1" id="lblDispCaldDate"></span>
                                            &nbsp;
                                            <span class="font-style1" id="lblDispOfcTime"></span>
                                            &nbsp;
                                            <span class="font-style1" id="lblDispLevTime"></span>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                            <!-- detail -->
                            <input name="hdnCvClientIdList" id="hdnCvClientIdList" type="hidden" value="">
                            <div class="GridViewStyle1" id="gridview-container">
                                <div class="GridViewPanelStyle1">
                                    <div id="pnlWorkTime">
                                        <div>
                                            <table class="GridViewBorder GridViewRowCenter GridViewPadding yoko-tate" id="gvWorkTime" style="border-collapse: separate;" border="1" rules="all" cellspacing="0">
                                                <tbody id="gridview-warp">
                                                    @isset($results)
                                                        @if(count($results) < 1)
                                                            <tr style="width:70px;">
                                                                <td><span>{{ $messages }}</span></td>
                                                            </tr>
                                                        @else
                                                            <tr class="sticky-head">
                                                                <th class="fixed01" scope="col" style="background: #4682B4; left: 0px;">
                                                                    日付
                                                                </th>
                                                                <th class="fixed02" scope="col" style="background: #4682B4; left: 80px;">
                                                                    曜日
                                                                </th>
                                                                <th scope="col" style="background: #4682B4; left: 110px;">
                                                                    勤務体系
                                                                </th>
                                                                <th scope="col" style="background: #4682B4; left: 260px;">
                                                                    事由
                                                                </th>
                                                                <th scope="col">
                                                                    出勤
                                                                </th>
                                                                <th scope="col">
                                                                    退出
                                                                </th>
                                                                <th scope="col">
                                                                    外出1
                                                                </th>
                                                                <th scope="col">
                                                                    再入１
                                                                </th>
                                                                <th scope="col">
                                                                    外出２
                                                                </th>
                                                                <th scope="col">
                                                                    再入２
                                                                </th>
                                                                <th scope="col">
                                                                    出勤時間
                                                                </th>
                                                                <th scope="col">
                                                                    遅刻時間
                                                                </th>
                                                                <th scope="col">
                                                                    早退時間
                                                                </th>
                                                                <th scope="col">
                                                                    外出時間
                                                                </th>
                                                                @foreach ($table_header_names as $table_header_name)
                                                                <th scope="col">{{ $table_header_name->WORK_DESC_NAME }}</th>
                                                                @endforeach
                                                                <th scope="col">
                                                                    備考
                                                                </th>
                                                            </tr>
                                                            @foreach($results->unique('CALD_DATE') as $i=>$result)
                                                            <tr>
                                                                <td class="fixed01" style="width: 80px; left: 0px;">
                                                                    <span id="lblCaldDate" class="{{ $result->WORKPTN_CD == '002'?'text-danger':''}}" style="width: 80px; display: inline-block;">{{ date('Y/m/d', strtotime($result->CALD_DATE)) }}</span>
                                                                    <input type="hidden" class="calDate" name="worktime[{{ $i }}][CALD_DATE]" value="{{ date('Y-m-d', strtotime($result->CALD_DATE)) }}"/>
                                                                </td>
                                                                <td class="fixed02 dayOfWeek" style="width: 30px; left: 80px;">
                                                                    <span id="lblDayOfWeek" class="{{ $result->HLD_DATE == date('md', strtotime($result->CALD_DATE)) || config('consts.weeks')[date('w', strtotime($result->CALD_DATE))] == '土' || config('consts.weeks')[date('w', strtotime($result->CALD_DATE))] == '日'? 'text-danger':''}}" style="width: 30px; display: inline-block;">{{ config('consts.weeks')[date('w', strtotime($result->CALD_DATE))] }}</span>
                                                                </td>
                                                                <td style="width: 150px;">
                                                                    <select
                                                                        name="worktime[{{ $i }}][WORKPTN_CD]"
                                                                        id="txtWorkPtnCd"
                                                                        class="workPtnCd"
                                                                        style="width: 150px;"
                                                                    >
                                                                        @foreach ( $workptn_names as $workptn_name)
                                                                            <option
                                                                                value="{{ $workptn_name->WORKPTN_CD }}"
                                                                                class="{{ $workptn_name->WORK_CLS_CD == '00'?'text-danger':''}}"
                                                                                {{ $workptn_name->WORKPTN_NAME ==  $result->WORKPTN_NAME ? "selected" : "" }}
                                                                            >
                                                                                {{$workptn_name->WORKPTN_NAME }}
                                                                            </option>
                                                                        @endforeach
                                                                    </select>
                                                                </td>
                                                                <td style="width: 70px;">
                                                                    <select
                                                                        name="worktime[{{ $i }}][REASON_CD]"
                                                                        id="txtReasonCd"
                                                                        class="reasonCd"
                                                                        style="width: 70px;"
                                                                    >
                                                                        @foreach ($reason_names as $reason_name)
                                                                            <option
                                                                                value="{{ $reason_name->REASON_CD }}"
                                                                                class="{{ $reason_name->REASON_PTN_CD == '01'?'text-danger':''}} {{ $reason_name->REASON_PTN_CD == '02'?'text-primary':''}}"
                                                                                {{ $reason_name->REASON_NAME ==  $result->REASON_NAME ? "selected" : "" }}
                                                                            >
                                                                                {{ $reason_name->REASON_NAME }}
                                                                            </option>
                                                                        @endforeach
                                                                    </select>
                                                                </td>
                                                                <td style="white-space: nowrap;">
                                                                    <input
                                                                        name="worktime[{{ $i }}][OFC_TIME]"
                                                                        class="ofcTime"
                                                                        id="txtOfcTime"
                                                                        type="text"
                                                                        maxlength="5"
                                                                        oninput="value=onlyHalfWord(value)"
                                                                        value="{{ $result->OFC_TIME }}"
                                                                        @if ( $result->OFC_CNT >= 2 && !$result->OFC_TIME_HH )
                                                                        style="width: 40px; background-color: lightskyblue;"
                                                                        @elseif ( !$result->OFC_TIME_HH && $result->LEV_TIME_HH )
                                                                        style="width: 40px; background-color: tomato;"
                                                                        @elseif ( !$result->OFC_TIME_HH && !$result->LEV_TIME_HH )
                                                                        style="width: 40px;"
                                                                        @else
                                                                        style="width: 40px;"
                                                                        @endif
                                                                    >
                                                                    <span class="text-danger timeError"></span>
                                                                </td>
                                                                <td style="white-space: nowrap;">
                                                                    <input
                                                                        name="worktime[{{ $i }}][LEV_TIME]"
                                                                        class="levTime"
                                                                        id="txtLevTime"
                                                                        type="text"
                                                                        maxlength="5"
                                                                        oninput="value=onlyHalfWord(value)"
                                                                        value="{{ $result->LEV_TIME }}"
                                                                        @if ( $result->LEV_CNT >= 2 && !$result->LEV_TIME_HH )
                                                                        style="width: 40px; background-color: lightskyblue;"
                                                                        @elseif ( $result->OFC_TIME_HH && !($result->LEV_TIME_HH) )
                                                                        style="width: 40px; background-color: tomato;"
                                                                        @elseif ( !$result->OFC_TIME_HH && !$result->LEV_TIME_HH )
                                                                        style="width: 40px;"
                                                                        @else
                                                                        style="width: 40px;"
                                                                        @endif
                                                                    >
                                                                    <span class="text-danger timeError"></span>
                                                                </td>
                                                                <td style="white-space: nowrap;">
                                                                    <input
                                                                        name="worktime[{{ $i }}][OUT1_TIME]"
                                                                        class="out1Time"
                                                                        id="txtOut1Time"
                                                                        type="text"
                                                                        maxlength="5"
                                                                        oninput="value=onlyHalfWord(value)"
                                                                        value="{{ $result->OUT1_TIME }}"
                                                                        @if ( $result->OUT1_CNT >= 2 && !$result->OUT1_TIME_HH )
                                                                        style="width: 40px; background-color: lightskyblue;"
                                                                        @elseif ( !$result->OUT1_TIME_HH && $result->IN1_TIME_HH )
                                                                        style="width: 40px; background-color: tomato;"
                                                                        @elseif ( !$result->OUT1_TIME_HH && !$result->IN1_TIME_HH )
                                                                        style="width: 40px;"
                                                                        @else
                                                                        style="width: 40px;"
                                                                        @endif
                                                                    >
                                                                    <span class="text-danger timeError"></span>
                                                                </td>
                                                                <td style="white-space: nowrap;">
                                                                    <input
                                                                        name="worktime[{{ $i }}][IN1_TIME]"
                                                                        class="in1Time"
                                                                        id="txtIn1Time"
                                                                        type="text"
                                                                        maxlength="5"
                                                                        oninput="value=onlyHalfWord(value)"
                                                                        value="{{ $result->IN1_TIME }}"
                                                                        @if ( $result->IN1_CNT >= 2 && !$result->IN1_TIME_HH )
                                                                        style="width: 40px; background-color: lightskyblue;"
                                                                        @elseif ( $result->OUT1_TIME_HH && !($result->IN1_TIME_HH) )
                                                                        style="width: 40px; background-color: tomato;"
                                                                        @elseif ( !$result->OUT1_TIME_HH && !$result->IN1_TIME_HH )
                                                                        style="width: 40px;"
                                                                        @else
                                                                        style="width: 40px;"
                                                                        @endif
                                                                    >
                                                                    <span class="text-danger timeError"></span>
                                                                </td>
                                                                <td style="white-space: nowrap;">
                                                                    <input
                                                                        name="worktime[{{ $i }}][OUT2_TIME]"
                                                                        class="out2Time"
                                                                        id="txtOut2Time"
                                                                        type="text"
                                                                        maxlength="5"
                                                                        oninput="value=onlyHalfWord(value)"
                                                                        value="{{ $result->OUT2_TIME }}"
                                                                        @if ( $result->OUT2_CNT >= 2 && !$result->OUT2_TIME_HH )
                                                                        style="width: 40px; background-color: lightskyblue;"
                                                                        @elseif ( !$result->OUT2_TIME_HH && $result->IN2_TIME_HH )
                                                                        style="width: 40px; background-color: tomato;"
                                                                        @elseif ( !$result->OUT2_TIME_HH && !$result->IN2_TIME_HH )
                                                                        style="width: 40px;"
                                                                        @else
                                                                        style="width: 40px;"
                                                                        @endif
                                                                    >
                                                                    <span class="text-danger timeError"></span>
                                                                </td>
                                                                <td style="white-space: nowrap;">
                                                                    <input
                                                                        name="worktime[{{ $i }}][IN2_TIME]"
                                                                        class="in2Time"
                                                                        id="txtIn2Time"
                                                                        type="text"
                                                                        maxlength="5"
                                                                        oninput="value=onlyHalfWord(value)"
                                                                        value="{{ $result->IN2_TIME }}"
                                                                        @if ( $result->IN2_CNT >= 2 && !$result->IN2_TIME_HH )
                                                                        style="width: 40px; background-color: lightskyblue;"
                                                                        @elseif ( $result->OUT2_TIME_HH && !($result->IN2_TIME_HH) )
                                                                        style="width: 40px; background-color: tomato;"
                                                                        @elseif ( !$result->OUT2_TIME_HH && !$result->IN2_TIME_HH )
                                                                        style="width: 40px;"
                                                                        @else
                                                                        style="width: 40px;"
                                                                        @endif
                                                                    >
                                                                    <span class="text-danger timeError"></span>
                                                                </td>
                                                                <td style="white-space: nowrap;">
                                                                    <input
                                                                        name="worktime[{{ $i }}][WORK_TIME]"
                                                                        class="workTime"
                                                                        id="txtWorkTime"
                                                                        style="width: 40px;"
                                                                        type="text"
                                                                        maxlength="5"
                                                                        oninput="value=onlyHalfWord(value)"
                                                                        value="{{ $result->WORK_TIME }}"
                                                                    >
                                                                    <span class="text-danger timeError"></span>
                                                                </td>
                                                                <td style="white-space: nowrap;">
                                                                    <input
                                                                        name="worktime[{{ $i }}][TARD_TIME]"
                                                                        class="tardTime"
                                                                        id="txtTardTime"
                                                                        style="width: 40px;"
                                                                        type="text"
                                                                        maxlength="5"
                                                                        oninput="value=onlyHalfWord(value)"
                                                                        value="{{ $result->TARD_TIME }}"
                                                                    >
                                                                    <span class="text-danger timeError"></span>
                                                                </td>
                                                                <td style="white-space: nowrap;">
                                                                    <input
                                                                        name="worktime[{{ $i }}][LEAVE_TIME]"
                                                                        class="leaveTime"
                                                                        id="txtLeaveTime"
                                                                        style="width: 40px;"
                                                                        type="text"
                                                                        maxlength="5"
                                                                        oninput="value=onlyHalfWord(value)"
                                                                        value="{{ $result->LEAVE_TIME }}"
                                                                    >
                                                                    <span class="text-danger timeError"></span>
                                                                </td>
                                                                <td style="white-space: nowrap;">
                                                                    <input
                                                                        name="worktime[{{ $i }}][OUT_TIME]"
                                                                        class="outTime"
                                                                        id="txtOutTime"
                                                                        style="width: 40px;"
                                                                        type="text"
                                                                        maxlength="5"
                                                                        oninput="value=onlyHalfWord(value)"
                                                                        value="{{ $result->OUT_TIME }}"
                                                                    >
                                                                    <span class="text-danger timeError"></span>
                                                                </td>
                                                                <td style="white-space: nowrap;">
                                                                    <input
                                                                        name="worktime[{{ $i }}][OVTM1_TIME]"
                                                                        class="ovtm1Time"
                                                                        id="txtOvtm1Time"
                                                                        style="width: 40px;"
                                                                        type="text"
                                                                        maxlength="5"
                                                                        oninput="value=onlyHalfWord(value)"
                                                                        value="{{ $result->OVTM1_TIME }}"
                                                                    >
                                                                    <span class="text-danger timeError"></span>
                                                                </td>
                                                                <td style="white-space: nowrap;">
                                                                    <input
                                                                        name="worktime[{{ $i }}][OVTM2_TIME]"
                                                                        class="ovtm2Time"
                                                                        id="txtOvtm2Time"
                                                                        style="width: 40px;"
                                                                        type="text"
                                                                        maxlength="5"
                                                                        oninput="value=onlyHalfWord(value)"
                                                                        value="{{ $result->OVTM2_TIME }}"
                                                                    >
                                                                    <span class="text-danger timeError"></span>
                                                                </td>
                                                                <td style="white-space: nowrap;">
                                                                    <input
                                                                        name="worktime[{{ $i }}][OVTM3_TIME]"
                                                                        class="ovtm3Time"
                                                                        id="txtOvtm3Time"
                                                                        style="width: 40px;"
                                                                        type="text"
                                                                        maxlength="5"
                                                                        oninput="value=onlyHalfWord(value)"
                                                                        value="{{ $result->OVTM3_TIME }}"
                                                                    >
                                                                    <span class="text-danger timeError"></span>
                                                                </td>
                                                                <td style="white-space: nowrap;">
                                                                    <input
                                                                        name="worktime[{{ $i }}][OVTM4_TIME]"
                                                                        class="ovtm4Time"
                                                                        id="txtOvtm4Time"
                                                                        style="width: 40px;"
                                                                        type="text"
                                                                        maxlength="5"
                                                                        oninput="value=onlyHalfWord(value)"
                                                                        value="{{ $result->OVTM4_TIME }}"
                                                                    >
                                                                    <span class="text-danger timeError"></span>
                                                                </td>
                                                                <td style="white-space: nowrap;">
                                                                    <input
                                                                        name="worktime[{{ $i }}][OVTM5_TIME]"
                                                                        class="ovtm5Time"
                                                                        id="txtOvtm5Time"
                                                                        style="width: 40px;"
                                                                        type="text"
                                                                        maxlength="5"
                                                                        oninput="value=onlyHalfWord(value)"
                                                                        value="{{ $result->OVTM5_TIME }}"
                                                                    >
                                                                    <span class="text-danger timeError"></span>
                                                                </td>
                                                                <td style="white-space: nowrap;">
                                                                    <input
                                                                        name="worktime[{{ $i }}][OVTM6_TIME]"
                                                                        class="ovtm6Time"
                                                                        id="txtOvtm6Time"
                                                                        style="width: 40px;"
                                                                        type="text"
                                                                        maxlength="5"
                                                                        oninput="value=onlyHalfWord(value)"
                                                                        value="{{ $result->OVTM6_TIME }}"
                                                                    >
                                                                    <span class="text-danger timeError"></span>
                                                                </td>
                                                                <td style="white-space: nowrap;">
                                                                    <input
                                                                        name="worktime[{{ $i }}][EXT1_TIME]"
                                                                        class="ext1Time"
                                                                        id="txtExt1Time"
                                                                        style="width: 40px;"
                                                                        type="text"
                                                                        maxlength="5"
                                                                        oninput="value=onlyHalfWord(value)"
                                                                        value="{{ $result->EXT1_TIME }}"
                                                                    >
                                                                    <span class="text-danger timeError"></span>
                                                                </td>
                                                                <td style="white-space: nowrap;">
                                                                    <input
                                                                        name="worktime[{{ $i }}][EXT2_TIME]"
                                                                        class="ext2Time"
                                                                        id="txtExt2Time"
                                                                        style="width: 40px;"
                                                                        type="text"
                                                                        maxlength="5"
                                                                        oninput="value=onlyHalfWord(value)"
                                                                        value="{{ $result->EXT2_TIME }}"
                                                                    >
                                                                    <span class="text-danger timeError"></span>
                                                                </td>
                                                                <td style="white-space: nowrap;">
                                                                    <input
                                                                        name="worktime[{{ $i }}][EXT3_TIME]"
                                                                        class="ext3Time"
                                                                        id="txtExt3Time"
                                                                        style="width: 40px;"
                                                                        type="text"
                                                                        maxlength="5"
                                                                        oninput="value=onlyHalfWord(value)"
                                                                        value="{{ $result->EXT3_TIME }}"
                                                                    >
                                                                    <span class="text-danger timeError"></span>
                                                                </td>
                                                                <td class="GridViewRowLeft" style="white-space: nowrap;">
                                                                    <input
                                                                        name="worktime[{{ $i }}][REMARK]"
                                                                        class="rsv1Time"
                                                                        id="txtRsv1Time"
                                                                        style="width: 250px;"
                                                                        type="text"
                                                                        maxlength=""
                                                                        value="{{ $result->REMARK }}"
                                                                    >
                                                                </td>
                                                            </tr>
                                                            @endforeach
                                                        @endif
                                                    @endisset
                                                </tbody>
                                            </table>
                                        </div>
                                    </div>
                                </div>
                                <div>
                                    <!-- ErrorMessage -->
                                    <span class="text-danger" id="timeFormatError"></span><br>
                                    <span class="text-danger" id="sizeError"></span>
                                </div>
                                <br>
                                <!-- footer -->
                                <div class="GridViewStyle3">
                                @if(Session::has('id'))
                                    <table>
                                        <tbody>
                                            <tr>
                                                <th>出勤</th>
                                                <th>休出</th>
                                                <th>特休</th>
                                                <th>有休</th>
                                                <th>欠勤</th>
                                                <th>代休</th>
                                            </tr>
                                            <tr>
                                                <td>
                                                    <span id="lblSumWorkdayCnt" style="display: inline-block;">@isset($workdaycnt){{ ($workdaycnt['SUM_WORKDAY_CNT'] == 0 ? '' :($workdaycnt['SUM_WORKDAY_CNT'] ? $workdaycnt['SUM_WORKDAY_CNT'] : '')) }} @endisset</span>
                                                </td>
                                                <td>
                                                    <span id="lblSumHolworkCnt" style="display: inline-block;">@isset($holdaycnt){{ ($holdaycnt['SUM_HOLWORK_CNT'] == 0 ? '' :($holdaycnt['SUM_HOLWORK_CNT'] ? $holdaycnt['SUM_HOLWORK_CNT'] : '')) }} @endisset</span>
                                                </td>
                                                <td>
                                                    <span id="lblSumSpcholCnt" style="display: inline-block;">@isset($spcholcnt){{ ($spcholcnt['SUM_SPCHOL_CNT'] == 0 ? '' :($spcholcnt['SUM_SPCHOL_CNT'] ? $spcholcnt['SUM_SPCHOL_CNT'] : '')) }} @endisset</span>
                                                </td>
                                                <td>
                                                    <span id="lblSumPadholCnt" style="display: inline-block;">@isset($padholcnt){{ ($padholcnt['SUM_PADHOL_CNT'] == 0 ? '' :($padholcnt['SUM_PADHOL_CNT'] ? $padholcnt['SUM_PADHOL_CNT'] : '')) }} @endisset</span>
                                                </td>
                                                <td>
                                                    <span id="lblSumAbcworkCnt" style="display: inline-block;">@isset($abcworkcnt){{ ($abcworkcnt['SUM_ABCWORK_CNT'] == 0 ? '' :($abcworkcnt['SUM_ABCWORK_CNT'] ? $abcworkcnt['SUM_ABCWORK_CNT'] : '')) }} @endisset</span>
                                                </td>
                                                <td>
                                                    <span id="lblSumCompdayCnt" style="display: inline-block;">@isset($compdaycnt){{ ($compdaycnt['SUM_COMPDAY_CNT'] == 0 ? '' :($compdaycnt['SUM_COMPDAY_CNT'] ? $compdaycnt['SUM_COMPDAY_CNT'] : '')) }} @endisset</span>
                                                </td>
                                            </tr>
                                            <tr>
                                                <th>出勤時間</th>
                                                <th>遅刻時間</th>
                                                <th>早退時間</th>
                                                <th>外出時間</th>
                                                @isset($table_header_names)
                                                @foreach ($table_header_names as $table_header_name)
                                                @if($table_header_name->WORK_DESC_CLS_CD == '01')
                                                <th scope="col">{{ $table_header_name->WORK_DESC_NAME }}</th>
                                                @endif
                                                @endforeach
                                                @endisset
                                                <th>合計</th>
                                            </tr>
                                            <tr>
                                                <td>
                                                    <span id="lblSumWorkTime" style="display: inline-block;">@isset($worktime){{ ($worktime['SUM_WORK_TIME'] == '0:00' ? '' : ($worktime['SUM_WORK_TIME'] ? $worktime['SUM_WORK_TIME'] : '')) }} @endisset</span>
                                                </td>
                                                <td>
                                                    <span id="lblSumTardTime" style="display: inline-block;">@isset($tardtime){{ ($tardtime['SUM_TARD_TIME'] == '0:00' ? '' : ($tardtime['SUM_TARD_TIME'] ? $tardtime['SUM_TARD_TIME'] : '')) }} @endisset</span>
                                                </td>
                                                <td>
                                                    <span id="lblSumLeaveTime" style="display: inline-block;">@isset($leavetime){{ ($leavetime['SUM_LEAVE_TIME'] == '0:00' ? '' : ($leavetime['SUM_LEAVE_TIME'] ? $leavetime['SUM_LEAVE_TIME'] : '')) }} @endisset</span>
                                                </td>
                                                <td>
                                                    <span id="lblSumOut1Time" style="display: inline-block;">@isset($out1time){{ ($out1time['SUM_OUT_TIME'] == '0:00' ? '' : ($out1time['SUM_OUT_TIME'] ? $out1time['SUM_OUT_TIME'] : '')) }} @endisset</span>
                                                </td>
                                                <td>
                                                    <span id="lblSumOvtm1Time" style="display: inline-block;">@isset($ovtm1time){{ ($ovtm1time['SUM_OVTM1_TIME'] == '0:00' ? '' : ($ovtm1time['SUM_OVTM1_TIME'] ? $ovtm1time['SUM_OVTM1_TIME'] : '')) }} @endisset</span>
                                                </td>
                                                <td>
                                                    <span id="lblSumOvtm2Time" style="display: inline-block;">@isset($ovtm2time){{ ($ovtm2time['SUM_OVTM2_TIME'] == '0:00' ? '' : ($ovtm2time['SUM_OVTM2_TIME'] ? $ovtm2time['SUM_OVTM2_TIME'] : '')) }} @endisset</span>
                                                </td>
                                                <td>
                                                    <span id="lblSumOvtm3Time" style="display: inline-block;">@isset($ovtm3time){{ ($ovtm3time['SUM_OVTM3_TIME'] == '0:00' ? '' : ($ovtm3time['SUM_OVTM3_TIME'] ? $ovtm3time['SUM_OVTM3_TIME'] : '')) }} @endisset</span>
                                                </td>
                                                <td>
                                                    <span id="lblSumOvtm4Time" style="display: inline-block;">@isset($ovtm4time){{ ($ovtm4time['SUM_OVTM4_TIME'] == '0:00' ? '' : ($ovtm4time['SUM_OVTM4_TIME'] ? $ovtm4time['SUM_OVTM4_TIME'] : '')) }} @endisset</span>
                                                </td>
                                                <td>
                                                    <span id="lblSumOvtm5Time" style="display: inline-block;">@isset($ovtm5time){{ ($ovtm5time['SUM_OVTM5_TIME'] == '0:00' ? '' : ($ovtm5time['SUM_OVTM5_TIME'] ? $ovtm5time['SUM_OVTM5_TIME'] : '')) }} @endisset</span>
                                                </td>
                                                <td>
                                                    <span id="lblSumOvtm6Time" style="display: inline-block;">@isset($ovtm6time){{ ($ovtm6time['SUM_OVTM6_TIME'] == '0:00' ? '' : ($ovtm6time['SUM_OVTM6_TIME'] ? $ovtm6time['SUM_OVTM6_TIME'] : '')) }} @endisset</span>
                                                </td>
                                                <td>
                                                    <span id="lblSumTimes" style="display: inline-block;">@isset($GetSumTimes){{ ($GetSumTimes['SUM_TIMES'] == '0:00' ? '' : ($GetSumTimes['SUM_TIMES'] ? $GetSumTimes['SUM_TIMES'] : '')) }} @endisset</span>
                                                </td>
                                            </tr>
                                            <tr>
                                                @isset($table_header_names)
                                                @foreach ($table_header_names as $table_header_name)
                                                @if($table_header_name->WORK_DESC_CLS_CD == '02')
                                                <th scope="col">{{ $table_header_name->WORK_DESC_NAME }}</th>
                                                @endif
                                                @endforeach
                                                @endisset
                                                <th>合計</th>
                                            </tr>
                                            <tr>
                                                <td>
                                                    <span id="lblSumExt1Time" style="display: inline-block;">@isset($ext1time){{ ($ext1time['SUM_EXT1_TIME'] == '0:00' ? '' : ($ext1time['SUM_EXT1_TIME'] ? $ext1time['SUM_EXT1_TIME'] : '')) }} @endisset</span>
                                                </td>
                                                <td>
                                                    <span id="lblSumExt2Time" style="display: inline-block;">@isset($ext2time){{ ($ext2time['SUM_EXT2_TIME'] == '0:00' ? '' : ($ext2time['SUM_EXT2_TIME'] ? $ext2time['SUM_EXT2_TIME'] : '')) }} @endisset</span>
                                                </td>
                                                <td>
                                                    <span id="lblSumExt3Time" style="display: inline-block;">@isset($ext3time){{ ($ext3time['SUM_EXT3_TIME'] == '0:00' ? '' : ($ext3time['SUM_EXT3_TIME'] ? $ext3time['SUM_EXT3_TIME'] : '')) }} @endisset</span>
                                                </td>
                                                <td>
                                                    <span id="lblSumExtTimes" style="display: inline-block;">@isset($GetSumExtTimes){{ ($GetSumExtTimes['SUM_EXT_TIMES'] == '0:00' ? '' : ($GetSumExtTimes['SUM_EXT_TIMES'] ? $GetSumExtTimes['SUM_EXT_TIMES'] : '')) }} @endisset</span>
                                                </td>
                                            </tr>
                                        </tbody>
                                    </table>
                                @endif
                                </div>
                                <div class="line">
                                    <hr>
                                </div>
                                <p class="ButtonField2">
                                    <input
                                        name="btnCancel2"
                                        class="ButtonStyle1 submit-form"
                                        id="btnCancel2"
                                        type="button"
                                        value="キャンセル"
                                        data-url = "{{ route('wte.cancel')}}"
                                    >
                                </p>
                            </div>
                        </form>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div>
@endsection
@section('script')
<script src="{{ asset('js/work_time/WorkTimeEditor.js') }}" defer></script>

<script>
var emp_cd = "{{$search_data['txtEmpCd']}}";

//formボタンクリック
$(document).on('click', '.submit-form', function(){
    var url = $(this).data('url');
    $('#form').attr('action', url);
    $('#form').submit();
});

//bootstrap デートピッカー
$(function() {
    gotoSearch();
    $('#ddlDate').datepicker({
        format: 'yyyy年mm月',
        autoclose: true,
        language: 'ja',       // カレンダー日本語化のため
        minViewMode : 1
    });

    // 入力可能文字：半角英数
    onlyHalfWord = n => n.replace(/[０-９：]/g, s => String.fromCharCode(s.charCodeAt(0) - 65248))
                        .replace(/[^0-9:]/g, '');

    // 入力可能文字：半角英数字・文字
    onlyHalfNumWord = n => n.replace(/[０-９Ａ-Ｚａ-ｚ]/g, s => String.fromCharCode(s.charCodeAt(0) - 65248))
                        .replace(/[^0-9a-zA-Z]/g, '');

    // 時間書式チェック
    var timeFormatCheck = function(e) {
        var targetTd = $(e.target).closest('td');

        var ofcTime = targetTd.find('.ofcTime').val(); //出勤
        var levTime = targetTd.find('.levTime').val(); //退出
        var out1Time = targetTd.find('.out1Time').val(); //外出１
        var in1Time = targetTd.find('.in1Time').val(); //再入１
        var out2Time = targetTd.find('.out2Time').val(); //外出２
        var in2Time = targetTd.find('.in2Time').val(); //再入２
        var workTime = targetTd.find('.workTime').val(); //出勤時間
        var tardTime = targetTd.find('.tardTime').val(); //遅刻時間
        var leaveTime = targetTd.find('.leaveTime').val(); //早退時間
        var outTime = targetTd.find('.outTime').val(); //外出時間
        var ovtm1Time = targetTd.find('.ovtm1Time').val(); //残業項目１時間
        var ovtm2Time = targetTd.find('.ovtm2Time').val(); //残業項目２時間
        var ovtm3Time = targetTd.find('.ovtm3Time').val(); //残業項目３時間
        var ovtm4Time = targetTd.find('.ovtm4Time').val(); //残業項目４時間
        var ovtm5Time = targetTd.find('.ovtm5Time').val(); //残業項目５時間
        var ovtm6Time = targetTd.find('.ovtm6Time').val(); //残業項目６時間
        var ext1Time = targetTd.find('.ext1Time').val(); //割増対象１時間
        var ext2Time = targetTd.find('.ext2Time').val(); //割増対象２時間
        var ext3Time = targetTd.find('.ext3Time').val(); //割増対象３時間

        var validTime = /^([0-9]|[0-2][0-9]|3[0-5]):([0-5][0-9])$/;

        // 時間書式チェック
        if((ofcTime && !ofcTime.match(validTime)) || (levTime && !levTime.match(validTime)) ||
           (out1Time && !out1Time.match(validTime)) || (in1Time && !in1Time.match(validTime)) ||
           (out2Time && !out2Time.match(validTime)) || (in2Time && !in2Time.match(validTime)) ||
           (workTime && !workTime.match(validTime)) || (tardTime && !tardTime.match(validTime)) ||
           (leaveTime && !leaveTime.match(validTime)) || (outTime && !outTime.match(validTime)) ||
           (ovtm1Time && !ovtm1Time.match(validTime)) || (ovtm2Time && !ovtm2Time.match(validTime)) ||
           (ovtm3Time && !ovtm3Time.match(validTime)) || (ovtm4Time && !ovtm4Time.match(validTime)) ||
           (ovtm5Time && !ovtm5Time.match(validTime)) || (ovtm6Time && !ovtm6Time.match(validTime)) ||
           (ext1Time && !ext1Time.match(validTime)) || (ext2Time && !ext2Time.match(validTime)) ||
           (ext3Time && !ext3Time.match(validTime)))
        {
            targetTd.find('.timeError').text('*3');
            $('#timeFormatError').text('*3 ' + '{{ getArrValue($error_messages, 2003) }}');
            return false;
        } else {
            targetTd.find('.timeError').empty();
            var exist = false;
            $('.timeError').each(function(i, element){
                if ($(element).text() == '*3' ) {
                    exist = true;
                }
            });
            if (!exist) {
                $('#timeFormatError').empty();
            }
        }
        return true;
    };
    $('.tardTime, .leaveTime, .outTime, .ext1Time, .ext2Time, .ext3Time').focusout(timeFormatCheck);

    var CWTimeCalculate = function(e) {

        var noError = timeFormatCheck(e);
        if (!noError) {
            return false;
        }

        $(e.target).closest('tr').find("span.timeError").each(function(i,element){
            if ($(element).text()) {
                noError = false;
            }
        });
        if (!noError) {
            return false;
        }

        var empCd = $('#txtEmpCd').val(); //社員番号
        var ddlDate = $('#ddlDate').val(); //対象年月度
        var parent = $(e.target).closest('tr');
        var targetTd = $(e.target).closest('td');

        var ofcTime = parent.find('.ofcTime').val(); //出勤
        var levTime = parent.find('.levTime').val(); //退出
        var out1Time = parent.find('.out1Time').val(); //外出１
        var in1Time = parent.find('.in1Time').val(); //再入１
        var out2Time = parent.find('.out2Time').val(); //外出２
        var in2Time = parent.find('.in2Time').val(); //再入２
        var workTime = parent.find('.workTime').val(); //出勤時間
        var tardTime = parent.find('.tardTime').val(); //遅刻時間
        var leaveTime = parent.find('.leaveTime').val(); //早退時間
        var outTime = parent.find('.outTime').val(); //外出時間
        var ovtm1Time = parent.find('.ovtm1Time').val(); //残業項目１時間
        var ovtm2Time = parent.find('.ovtm2Time').val(); //残業項目２時間
        var ovtm3Time = parent.find('.ovtm3Time').val(); //残業項目３時間
        var ovtm4Time = parent.find('.ovtm4Time').val(); //残業項目４時間
        var ovtm5Time = parent.find('.ovtm5Time').val(); //残業項目５時間
        var ovtm6Time = parent.find('.ovtm6Time').val(); //残業項目６時間
        var ext1Time = parent.find('.ext1Time').val(); //割増対象１時間
        var ext2Time = parent.find('.ext2Time').val(); //割増対象２時間
        var ext3Time = parent.find('.ext3Time').val(); //割増対象３時間

        // 大小関係チェック
        var ofcTimeTd = targetTd.find('.ofcTime').val(); //出勤
        var levTimeTd = targetTd.find('.levTime').val(); //退出
        var out1TimeTd = targetTd.find('.out1Time').val(); //外出１
        var in1TimeTd = targetTd.find('.in1Time').val(); //再入１
        var out2TimeTd = targetTd.find('.out2Time').val(); //外出２
        var in2TimeTd = targetTd.find('.in2Time').val(); //再入２

        var validTime = /^([0-9]|[0-2][0-9]|3[0-5]):([0-5][0-9])$/;

        // 大小関係チェック「出勤・退出」
        if( ofcTime.match(validTime) && levTime.match(validTime) ) {
            if((ofcTimeTd && ofcTimeTd.match(validTime)) || (levTimeTd && levTimeTd.match(validTime)))
            {
                if(parseInt(ofcTime) > parseInt(levTime)){
                    targetTd.find('.timeError').text('*4');
                    $('#sizeError').text('*4 ' + '{{ getArrValue($error_messages, 2009) }}');
                    return false;
                } else {
                    targetTd.find('.timeError').empty();
                    var exist = false;
                    $('.timeError').each(function(i, element){
                        if ($(element).text() == '*4' ) {
                            exist = true;
                        }
                    });
                    if (!exist) {
                        $('#sizeError').empty();
                    }
                }
            }
        }

        // 大小関係チェック「外出１・再入１」
        if( out1Time.match(validTime) && in1Time.match(validTime) ) {
            if((out1TimeTd && out1TimeTd.match(validTime)) || (in1TimeTd && in1TimeTd.match(validTime)))
            {
                if(parseInt(out1Time) > parseInt(in1Time)){
                    targetTd.find('.timeError').text('*4');
                    $('#sizeError').text('*4 ' + '{{ getArrValue($error_messages, 2009) }}');
                    return false;
                } else {
                    targetTd.find('.timeError').empty();
                    var exist = false;
                    $('.timeError').each(function(i, element){
                        if ($(element).text() == '*4' ) {
                            exist = true;
                        }
                    });
                    if (!exist) {
                        $('#sizeError').empty();
                    }
                }
            }
        }

        // 大小関係チェック「外出２・再入２」
        if((out2TimeTd && out2TimeTd.match(validTime)) || (in2TimeTd && in2TimeTd.match(validTime)) )
        {
            if(parseInt(out2Time) > parseInt(in2Time)){
                targetTd.find('.timeError').text('*4');
                $('#sizeError').text('*4 ' + '{{ getArrValue($error_messages, 2009) }}');
                return false;
            } else {
                targetTd.find('.timeError').empty();
                var exist = false;
                $('.timeError').each(function(i, element){
                    if ($(element).text() == '*4' ) {
                        exist = true;
                    }
                });
                if (!exist) {
                    $('#sizeError').empty();
                }
            }
        }

        ajaxWithLoading({
            headers: {
                'X-CSRF-TOKEN': $('meta[name="csrf-token"]').attr('content')
            },
            url: '/work_time/WorkTimeEditorTimeCal/' + empCd,
            type: 'POST',
            context:parent,
            data: {
                'txtEmpCd': empCd,
                'ddlDate': ddlDate,
                'calDate': parent.find('.calDate').val(),
                'workPtnCd': parent.find('.workPtnCd').val(),
                'reasonCd': parent.find('.reasonCd').val(),
                'ofcTime': parent.find('.ofcTime').val(),
                'levTime': parent.find('.levTime').val(),
                'out1Time': parent.find('.out1Time').val(),
                'in1Time': parent.find('.in1Time').val(),
                'out2Time': parent.find('.out2Time').val(),
                'in2Time': parent.find('.in2Time').val(),
            }
        }).done(function(data) {
            this.find($('.workPtnCd')).val(data[0].WORKPTN_CD);
            this.find($('.reasonCd')).val(data[0].REASON_CD);
            this.find($('.ofcTime')).val(data[0].OFC_TIME);
            this.find($('.levTime')).val(data[0].LEV_TIME);
            this.find($('.out1Time')).val(data[0].OUT1_TIME);
            this.find($('.in1Time')).val(data[0].IN1_TIME);
            this.find($('.out2Time')).val(data[0].OUT2_TIME);
            this.find($('.in2Time')).val(data[0].IN2_TIME);
            this.find($('.workTime')).val(data[0].WORK_TIME);
            this.find($('.tardTime')).val(data[0].TARD_TIME);
            this.find($('.leaveTime')).val(data[0].LEAVE_TIME);
            this.find($('.outTime')).val(data[0].OUT_TIME);
            this.find($('.ovtm1Time')).val(data[0].OVTM1_TIME);
            this.find($('.ovtm2Time')).val(data[0].OVTM2_TIME);
            this.find($('.ovtm3Time')).val(data[0].OVTM3_TIME);
            this.find($('.ovtm4Time')).val(data[0].OVTM4_TIME);
            this.find($('.ovtm5Time')).val(data[0].OVTM5_TIME);
            this.find($('.ovtm6Time')).val(data[0].OVTM6_TIME);
            this.find($('.ext1Time')).val(data[0].EXT1_TIME);
            this.find($('.ext2Time')).val(data[0].EXT2_TIME);
            this.find($('.ext3Time')).val(data[0].EXT3_TIME);

            // 出勤色付け「未打刻・二重打刻」
            if( data[0].OFC_CNT >= 2 && !ofcTime ){
                this.find($('.ofcTime')).css('background-color','lightskyblue');
            }else if( !ofcTime && levTime ){
                this.find($('.ofcTime')).css('background-color','tomato');
            }else if(!ofcTime && !levTime ){
                this.find($('.ofcTime')).css('background-color','');
            }else if( ofcTime && levTime ){
                this.find($('.ofcTime')).css('background-color','');
            }else{
                this.find($('.ofcTime')).css('background-color','');
            }

            // 退出色付け「未打刻・二重打刻」
            if( data[0].LEV_CNT >= 2 && !levTime ){
                this.find($('.levTime')).css('background-color','lightskyblue');
            }else if( ofcTime && !levTime ){
                this.find($('.levTime')).css('background-color','tomato');
            }else if(!ofcTime && !levTime ){
                this.find($('.levTime')).css('background-color','');
            }else if( ofcTime && levTime ){
                this.find($('.levTime')).css('background-color','');
            }else{
                this.find($('.levTime')).css('background-color','');
            }

            // 外出１色付け「未打刻・二重打刻」
            if( data[0].OUT1_CNT >= 2 && !out1Time ){
                this.find($('.out1Time')).css('background-color','lightskyblue');
            }else if( !out1Time && in1Time ){
                this.find($('.out1Time')).css('background-color','tomato');
            }else if(!out1Time && !in1Time ){
                this.find($('.out1Time')).css('background-color','');
            }else if(out1Time && in1Time ){
                this.find($('.out1Time')).css('background-color','');
            }else{
                this.find($('.out1Time')).css('background-color','');
            }

            // 再入１色付け「未打刻・二重打刻」
            if( data[0].IN1_CNT >= 2 && !in1Time ){
                this.find($('.in1Time')).css('background-color','lightskyblue');
            }else if( out1Time && !in1Time ){
                this.find($('.in1Time')).css('background-color','tomato');
            }else if(!out1Time && !in1Time ){
                this.find($('.in1Time')).css('background-color','');
            }else if(out1Time && in1Time ){
                this.find($('.in1Time')).css('background-color','');
            }else{
                this.find($('.in1Time')).css('background-color','');
            }

            // 外出２色付け「未打刻・二重打刻」
            if( data[0].OUT2_CNT >= 2 && !out2Time ){
                this.find($('.out2Time')).css('background-color','lightskyblue');
            }else if( !out2Time && in2Time ){
                this.find($('.out2Time')).css('background-color','tomato');
            }else if(!out2Time && !in2Time ){
                this.find($('.out2Time')).css('background-color','');
            }else if(out2Time && in2Time ){
                this.find($('.out2Time')).css('background-color','');
            }else{
                this.find($('.out2Time')).css('background-color','');
            }

            // 再入２色付け「未打刻・二重打刻」
            if( data[0].IN2_CNT >= 2 && !in2Time ){
                this.find($('.in2Time')).css('background-color','lightskyblue');
            }else if( out2Time && !in2Time ){
                this.find($('.in2Time')).css('background-color','tomato');
            }else if(!out2Time && !in2Time ){
                this.find($('.in2Time')).css('background-color','');
            }else if(out2Time && in2Time ){
                this.find($('.in2Time')).css('background-color','');
            }else{
                this.find($('.in2Time')).css('background-color','');
            }

            var exist1 = false;
            var exist2 = false;
            $('.timeError').each(function(i, element){
                if ($(element).text() == '*3' ) {
                    exist1 = true;
                }
                if ($(element).text() == '*4' ) {
                    exist2 = true;
                }
            });
            if (!exist1) {
                $('#timeFormatError').empty();
            }
            if (!exist2) {
                $('#sizeError').empty();
            }
        }).fail(function(data) {
            console.log(data);
        });
    };
    $('.workPtn, .reasonCd, .ofcTime, .levTime, .out1Time, .in1Time, .out2Time, .in2Time').focusout(CWTimeCalculate);

    // 日数計算
    var CDDayCalculate = function(e) {

        var formatCheckResult = timeFormatCheck(e);
        if (!formatCheckResult) {
            return false;
        }

        var empCd = $('#txtEmpCd').val();
        var ddlDate = $('#ddlDate').val();
        var parent = $(e.target).closest('tr');

        ajaxWithLoading({
            headers: {
                'X-CSRF-TOKEN': $('meta[name="csrf-token"]').attr('content')
            },
            url: '/work_time/WorkTimeEditorDayCal/' + empCd,
            type: 'POST',
            context:parent,
            data: {
                'txtEmpCd': empCd,
                'ddlDate': ddlDate,
                'calDate': parent.find('.calDate').val(),
                'workPtnCd': parent.find('.workPtnCd').val(),
                'reasonCd': parent.find('.reasonCd').val(),
                'workTime': parent.find('.workTime').val(),
                'ovtm1Time': parent.find('.ovtm1Time').val(),
                'ovtm2Time': parent.find('.ovtm2Time').val(),
                'ovtm3Time': parent.find('.ovtm3Time').val(),
                'ovtm4Time': parent.find('.ovtm4Time').val(),
                'ovtm5Time': parent.find('.ovtm5Time').val(),
                'ovtm6Time': parent.find('.ovtm6Time').val(),
            }
        }).done(function(data) {
            this.find($('.workPtnCd')).val(data[0].WORKPTN_CD);
            this.find($('.reasonCd')).val(data[0].REASON_CD);
            this.find($('.ofcTime')).val(data[0].OFC_TIME);
            this.find($('.levTime')).val(data[0].LEV_TIME);
            this.find($('.out1Time')).val(data[0].OUT1_TIME);
            this.find($('.in1Time')).val(data[0].IN1_TIME);
            this.find($('.out2Time')).val(data[0].OUT2_TIME);
            this.find($('.in2Time')).val(data[0].IN2_TIME);
            this.find($('.workTime')).val(data[0].WORK_TIME);
            this.find($('.tardTime')).val(data[0].TARD_TIME);
            this.find($('.leaveTime')).val(data[0].LEAVE_TIME);
            this.find($('.outTime')).val(data[0].OUT_TIME);
            this.find($('.ovtm1Time')).val(data[0].OVTM1_TIME);
            this.find($('.ovtm2Time')).val(data[0].OVTM2_TIME);
            this.find($('.ovtm3Time')).val(data[0].OVTM3_TIME);
            this.find($('.ovtm4Time')).val(data[0].OVTM4_TIME);
            this.find($('.ovtm5Time')).val(data[0].OVTM5_TIME);
            this.find($('.ovtm6Time')).val(data[0].OVTM6_TIME);
            this.find($('.ext1Time')).val(data[0].EXT1_TIME);
            this.find($('.ext2Time')).val(data[0].EXT2_TIME);
            this.find($('.ext3Time')).val(data[0].EXT3_TIME);

        }).fail(function(data) {
            console.log(data);
        });
    };
    $('.workTime, .ovtm1Time, .ovtm2Time, .ovtm3Time, .ovtm4Time, .ovtm5Time, .ovtm6Time').focusout(CDDayCalculate);
})

// ローディング設定
var gotoSearch = function(e) {
    var is_index = "{{ !empty($is_index) ? true : false; }}";
    if(emp_cd != "" && is_index) {
        $.LoadingOverlay("show");
        $("#btnShow").click();
    }
};
</script>
@endsection
